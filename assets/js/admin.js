jQuery(function(a){function b(b,d){a(".wpas-import-products-container,#wpas-woo-categories-container").show(),a(".wpas-import-pre-loader-container").html(c.preLoader());var e=wpas_admin_object.store_country+"&Keywords="+b+"&SearchIndex="+d+"&multipageStart="+wpas_admin_object.page_number+"&multipageCount="+wpas_admin_object.prouct_per_page;a.ajax({url:e,dataType:"jsonp",jsonpCallback:"search_callback",success:function(d){var e={action:"wpas_products_import_search",keyword:b,data:d.results},f=c.ajax(e);f.done(function(b){a(".wpas-import-pre-loader-container").html(""),a(".wpas-import-products-list").html(b.html),b.product_num>=wpas_admin_object.prouct_per_page?(a(".wpas-load-more-wrapper").show(),a("#wpas-import-load-more-btn").attr("data-keyword",b.keyword),a("#wpas-import-load-more-btn").attr("data-page-num",b.page_num)):a(".wpas-load-more-wrapper").hide()})},error:function(a,b,c){console.log(a,b,c)}})}wpas_admin_object.auth_token&&localStorage.setItem("wpas_import_ext_objects",JSON.stringify(wpas_admin_object));var c={ajax:function(a){return jQuery.post(wpas_admin_object.ajax_url,a)},preLoader:function(){return"<div class=\"wpas-ajax-pre-loader-container\" ><img  class=\"wpas-ajax-pre-loader\" src=\""+wpas_admin_object.image_path+"pre-loader.gif\" alt=\"Loadding...\" /></div>"},loadMorePreLoader:function(){return"<img  class=\"wpas-ajax-loadmore-pre-loader\" src=\""+wpas_admin_object.image_path+"load-more.gif\" alt=\"Loadding...\" />"}};a(".wpas-import-products-container,#wpas-woo-categories-container").hide(),a("#wpas_import_search_keywords").on("keypress",function(c){if(13==c.which||13==c.keyCode){c.preventDefault();var d=a(this).val().trim(),e=a("#wpas_import_search_category").val();""==d?(a("#wpas-import-validation-msg").show(),setTimeout(function(){a("#wpas-import-validation-msg").hide()},2e3)):b(d,e)}}),a("#wpas_import_search_btn").on("click",function(c){c.preventDefault();var d=a("#wpas_import_search_keywords").val().trim(),e=a("#wpas_import_search_category").val();""==d?(a("#wpas-import-validation-msg").show(),setTimeout(function(){a("#wpas-import-validation-msg").hide()},2e3)):b(d,e)}),a(document).on("click","#wpas-import-load-more-btn",function(){var b=a(this).attr("data-keyword"),d=a(this).attr("data-page-num");if(1==d)var e=20;else if(2==d)var e=20;var f=a("#wpas_import_search_category").val();a(".wpas-import-pre-loader-container").html(c.preLoader());var g=wpas_admin_object.store_country+"&Keywords="+b+"&SearchIndex="+f+"&multipageStart="+d+"&multipageCount="+e;a.ajax({url:g,dataType:"jsonp",jsonpCallback:"search_callback",success:function(e){var f={action:"wpas_products_import_search",keyword:b,data:e.results,page_num:d},g=c.ajax(f);g.done(function(b){a(".wpas-import-pre-loader-container").html(""),a(".wpas-import-products-list").html(b.html),20>b.product_num?(a(".wpas-load-more-wrapper").show(),a("#wpas-import-load-more-btn").attr("data-keyword",b.keyword),a("#wpas-import-load-more-btn").attr("data-page-num",b.page_num)):a(".wpas-load-more-wrapper").hide()})},error:function(a,b,c){console.log(a,b,c)}})}),a(document).on("click",".wpas-item-import-btn",function(b){b.preventDefault();var c=a(this);c.text("Importing...");var d=JSON.parse(atob(a(this).attr("wpas-import-data"))),e=a("#wpas_woo_category").val(),f=d.ASIN,g=d.Title,h=d.Price,i=d.DetailPageURL,j=d.ImageUrl;jQuery.post(wpas_admin_object.ajax_url,{action:"wpas_import_product_from_amazon",sku:f,title:g,price:h,amazon_url:i,image:j,importing_category:e},function(a){200==a.status?(c.text(a.message),c.parent().find(".wpas-import-success-action").html(a.success_action)):(c.text(a.message).css({"word-wrap":"break-word",display:"inline"}),c.parent().find(".wpas-import-success-action").html(a.success_action))})}),jQuery(document).on("ready",function(){if(0<a("#auth-token-generator").length||0<a("#wpas_no_pa_import_submit").length){var b;0<a("#auth-token-generator").length?b=a("#auth-token-generator"):0<a("#wpas_no_pa_import_submit").length&&(b=a("#wpas_no_pa_import_submit"));try{a.get("chrome-extension://chlnealbecgihlcianbcpdjjbabhdgnm/images/icons/icon_16.png").done(function(){console.log("Wp Amazon shop Ext is installed")}).fail(function(){b.attr("disabled","disabled"),b.parent().append("<a id=\"wpas-ext-install-notice\" style=\"color:red;\" class=\"button button-secondary\" target=\"_blank\" href=\"https://chrome.google.com/webstore/detail/wp-amazon-shop-extension/chlnealbecgihlcianbcpdjjbabhdgnm\">Install <strong>WP Amazon Shop Ext</strong> from Chrome Store</a>"),console.log("Wp Amazon shop Ext is not installed")})}catch(a){console.log("Wp Amazon shop Ext is not installed")}}0<a(".wpas-upgrade-link-text").length&&a(".wpas-upgrade-link-text").parent().attr("target","_blank"),a("select[name=\"acl_wpas_use_for\"],input[name=\"acl_wpas_product_display_option[]\"],input[name=\"acl_wpas_buy_now_action\"],input[name=\"acl_wpas_enable_no_follow\"],select[name=\"acl_wpas_cart_import_category\"]").prop("disabled",!0)})});